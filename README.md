# üí° AI Smart Attendance System (Facial Recognition)

This project implements a fully automated, contactless attendance tracking system using Python, Computer Vision (OpenCV), and Deep Learning (Face Recognition). It accurately logs user Check-In and Check-Out times, enforces a minimum work gap, and provides a real-time web dashboard for reporting.

-----

## üåü Key Features

  * **Contactless Biometric Attendance:** Uses facial recognition to identify authorized individuals.
  * **Check-In/Check-Out Logic:** Accurately records time-in and time-out for daily attendance.
  * **Time Constraints:** Implements a **2-hour minimum gap** between check-in and check-out to prevent logging errors.
  * **Cooldown Period (Debounce):** Prevents logging duplicate entries in rapid succession from the video stream.
  * **Total Work Time:** Calculates and displays the duration between check-in and check-out on the web report.
  * **Web Dashboard:** A simple Flask application to view real-time attendance logs.

-----

## üíª Project Structure

Your directory should be organized as follows. Note that folders are created manually, while the `.pkl` and `.csv` files are generated by the scripts.

```
Smart-Attendance-System/
‚îú‚îÄ‚îÄ 01_Register_Faces.py       # 1. Data Acquisition
‚îú‚îÄ‚îÄ 02_Encode_Faces.py         # 2. AI Training
‚îú‚îÄ‚îÄ 03_Attendance_System.py    # 3. Core System (Webcam loop and logging)
|
‚îú‚îÄ‚îÄ Registered_Faces/          # Folder to store raw training images (Must be created manually)
|
‚îú‚îÄ‚îÄ face_encodings.pkl         # Trained model data (Auto-generated by 02_Encode_Faces.py)
‚îú‚îÄ‚îÄ Attendance_Log.csv         # Attendance records database (Auto-generated by 03_Attendance_System.py)
|
‚îî‚îÄ‚îÄ Web_Report_App/            # Flask Web Dashboard (Must be created manually)
    ‚îú‚îÄ‚îÄ app.py                 # Flask Backend code
    ‚îî‚îÄ‚îÄ templates/             # HTML files
        ‚îî‚îÄ‚îÄ index.html         # Frontend HTML code
```

-----

## ‚öôÔ∏è Setup and Installation

### 1\. Prerequisites

Ensure you have **Python 3.x** installed. A functional **webcam** is required to run the attendance system.

### 2\. Create and Activate Virtual Environment (Crucial Step)

Always use a virtual environment to manage dependencies:

**For Windows (PowerShell/Command Prompt):**

```bash
python -m venv venv
.\venv\Scripts\activate
```

**For macOS/Linux (Terminal):**

```bash
python3 -m venv venv
source venv/bin/activate
```

*(Your terminal should now show `(venv)`)*

### 3\. Install Dependencies

With the virtual environment active, install all required libraries, including the heavy `face-recognition` module and the Flask web framework:

```bash
# Installs core libraries and web framework
pip install opencv-python numpy pandas Flask

# Installs the facial recognition library (This step may take several minutes)
pip install cmake dlib
pip install face-recognition
```

-----

## ‚ñ∂Ô∏è How to Run the Project (Execution Order)

### Step 1: Register Users (Data Acquisition)

Run the script for **each unique user**. It will prompt the administrator for the Name and Registered ID.

```bash
# Run this for every person
python 01_Register_Faces.py
```

  * **Instructions:** Follow the console prompts. When the camera opens, press the **'s' key** to begin capturing 30 images, and the window will close automatically.

### Step 2: Train the AI Model

Run this **once** after all users are registered. It creates the `face_encodings.pkl` file.

```bash
python 02_Encode_Faces.py
```

### Step 3: Start the Core Attendance System (Terminal 1)

This script opens the webcam and continuously monitors for attendance. **Keep this script running in one terminal.**

1.  *Delete any old `Attendance_Log.csv` file before running to ensure the new format is used.*
2.  Run the script:
    ```bash
    # Keep this running in Terminal 1
    python 03_Attendance_System.py
    ```
      * **Check-In:** The first time a user is recognized, their Check-In time is logged.
      * **Check-Out:** The system will only log a Check-Out if the user is recognized **at least 2 hours later** than their Check-In time.
      * **To Stop:** Click the camera window and press the **'q' key**.

### Step 4: View the Web Dashboard (Terminal 2)

**Open a NEW Terminal** (keeping Terminal 1 running) to start the Flask web server.

1.  Ensure the virtual environment is **activated** in the new terminal.
2.  Run the Flask app:
    ```bash
    # Run this in a separate terminal (Terminal 2)
    python Web_Report_App/app.py
    ```
3.  The console will automatically open your default browser to the report: `http://127.0.0.1:5000/`

-----

## üõë Troubleshooting Tips

| Issue | Solution |
| :--- | :--- |
| **Camera light is off / Program hangs** | **1.** Close ALL camera-using applications (Zoom, Teams, etc.). **2.** In `03_Attendance_System.py`, try changing `cv2.VideoCapture(0)` to `(1)` or `(2)`. |
| **Multiple Check-Outs Logged** | Ensure you are using the final `03_Attendance_System.py` code, which contains the **5-second cooldown** (debounce) logic. |
| **HTTP 500 Error on Webpage** | Delete the old `Attendance_Log.csv` and run `03_Attendance_System.py` again. This ensures the web report reads the correct column headers. |
| **`ModuleNotFoundError`** | Ensure the virtual environment is active and run the required `pip install` commands again. |
